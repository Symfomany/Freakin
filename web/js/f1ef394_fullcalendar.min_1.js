(function(h,D){function Qa(a){h.extend(!0,ua,a)}function nb(a,c,b){function d(){setTimeout(function(){!q.start&&h("body").is(":visible")&&l()},0)}function e(){return a.is(":visible")}function f(a){q&&a==q.name||(J++,q&&(R("viewDestroy",q,q,q.element),p(),q.triggerEventDestroy(),Z(),q.element.remove(),G.deactivateButton(q.name)),G.activateButton(a),q=new Y[a](h("<div class='fc-view fc-view-"+a+"' style='position:relative'/>").appendTo(N),n),l(),U(),J--)}function l(a){(!q.start||a||q.start>A||A>=q.end)&&
e()&&z(a)}function z(a){J++;q.start&&(R("viewDestroy",q,q,q.element),p(),v());Z();q.render(A,a||0);r();U();(q.afterRender||ob)();G.updateTitle(q.title);a=new Date;a>=q.start&&q.end>a?G.disableButton("today"):G.enableButton("today");R("viewRender",q,q,q.element);q.trigger("viewDisplay",u);J--;!c.lazyFetching||K(q.visStart,q.visEnd)?V(q.visStart,q.visEnd):x()}function k(){e()&&(p(),v(),m(),r(),x())}function m(){L=c.contentHeight?c.contentHeight:c.height?c.height-(ga?ga.height():0)-qa(N):Math.round(N.width()/
Math.max(c.aspectRatio,0.5))}function r(){L===D&&m();J++;q.setHeight(L);q.setWidth(N.width());J--;F=a.outerWidth()}function g(){if(!J)if(q.start){var c=++H;setTimeout(function(){c==H&&!J&&e()&&F!=(F=a.outerWidth())&&(J++,k(),q.trigger("windowResize",u),J--)},200)}else d()}function B(a){v();x(a)}function x(a){e()&&(q.setEventData(M),q.renderEvents(M,a),q.trigger("eventAfterAllRender"))}function v(){q.triggerEventDestroy();q.clearEvents();q.clearEventData()}function p(){q&&q.unselect()}function Z(){N.css({width:"100%",
height:N.height(),overflow:"hidden"})}function U(){N.css({width:"",height:"",overflow:""})}function R(a,b){return c[a]?c[a].apply(b||u,Array.prototype.slice.call(arguments,2)):D}var n=this;n.options=c;n.render=function(b){N?e()&&(m(),z(b)):(a.addClass("fc"),c.isRTL?a.addClass("fc-rtl"):a.addClass("fc-ltr"),c.theme&&a.addClass("ui-widget"),N=h("<div class='fc-content' style='position:relative'/>").prependTo(a),G=new pb(n,c),(ga=G.render())&&a.prepend(ga),f(c.defaultView),c.handleWindowResize&&h(window).resize(g),
h("body").is(":visible")||d())};n.destroy=function(){q&&(R("viewDestroy",q,q,q.element),q.triggerEventDestroy());h(window).unbind("resize",g);G.destroy();N.remove();a.removeClass("fc fc-rtl ui-widget")};n.refetchEvents=function(){v();V(q.visStart,q.visEnd)};n.reportEvents=function(a){M=a;x()};n.reportEventChange=function(a){B(a)};n.rerenderEvents=B;n.changeView=f;n.select=function(a,c,b){q.select(a,c,b===D?!0:b)};n.unselect=p;n.prev=function(){l(-1)};n.next=function(){l(1)};n.prevYear=function(){A.setFullYear(A.getFullYear()+
-1);ca(A);l()};n.nextYear=function(){A.setFullYear(A.getFullYear()+1);ca(A);l()};n.today=function(){A=new Date;l()};n.gotoDate=function(a,c,b){a instanceof Date?A=w(a):Ra(A,a,c,b);l()};n.incrementDate=function(a,c,b){a!==D&&(A.setFullYear(A.getFullYear()+a),ca(A));c!==D&&Ca(A,c);b!==D&&C(A,b);l()};n.formatDate=function(a,b){return aa(a,b,c)};n.formatDates=function(a,b,d){return Da(a,b,d,c)};n.getDate=function(){return w(A)};n.getView=function(){return q};n.option=function(a,b){return b===D?c[a]:(("height"==
a||"contentHeight"==a||"aspectRatio"==a)&&(c[a]=b,k()),D)};n.trigger=R;qb.call(n,c,b);var G,ga,N,q,F,L,O,K=n.isFetchNeeded,V=n.fetchEvents,u=a[0],H=0,J=0,A=new Date,M=[];Ra(A,c.year,c.month,c.date);c.droppable&&h(document).bind("dragstart",function(a,b){var d=a.target,e=h(d);if(!e.parents(".fc").length){var f=c.dropAccept;(h.isFunction(f)?f.call(d,e):e.is(f))&&(O=d,q.dragStart(O,a,b))}}).bind("dragstop",function(a,b){O&&(q.dragStop(O,a,b),O=null)})}function pb(a,c){function b(b){var e=h("<td class='fc-header-"+
b+"'/>");b=c.header[b];return b&&h.each(b.split(" "),function(b){0<b&&e.append("<span class='fc-header-space'/>");var f;h.each(this.split(","),function(b,r){if("title"==r)e.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),f&&f.addClass(d+"-corner-right"),f=null;else{var g;if(a[r]?g=a[r]:Y[r]&&(g=function(){v.removeClass(d+"-state-hover");a.changeView(r)}),g){var z=c.theme?Ea(c.buttonIcons,r):null,w=Ea(c.buttonText,r),v=h("<span class='fc-button fc-button-"+r+" "+d+"-state-default'>"+
(z?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+z+"'/></span>":w)+"</span>").click(function(){v.hasClass(d+"-state-disabled")||g()}).mousedown(function(){v.not("."+d+"-state-active").not("."+d+"-state-disabled").addClass(d+"-state-down")}).mouseup(function(){v.removeClass(d+"-state-down")}).hover(function(){v.not("."+d+"-state-active").not("."+d+"-state-disabled").addClass(d+"-state-hover")},function(){v.removeClass(d+"-state-hover").removeClass(d+"-state-down")}).appendTo(e);va(v);
f||v.addClass(d+"-corner-left");f=v}}});f&&f.addClass(d+"-corner-right")}),e}this.render=function(){d=c.theme?"ui":"fc";return c.header?e=h("<table class='fc-header' style='width:100%'/>").append(h("<tr/>").append(b("left")).append(b("center")).append(b("right"))):D};this.destroy=function(){e.remove()};this.updateTitle=function(a){e.find("h2").html(a)};this.activateButton=function(a){e.find("span.fc-button-"+a).addClass(d+"-state-active")};this.deactivateButton=function(a){e.find("span.fc-button-"+
a).removeClass(d+"-state-active")};this.disableButton=function(a){e.find("span.fc-button-"+a).addClass(d+"-state-disabled")};this.enableButton=function(a){e.find("span.fc-button-"+a).removeClass(d+"-state-disabled")};var d,e=h([])}function qb(a,c){function b(b,c){d(b,function(d){if(c==C){if(d){a.eventDataTransform&&(d=h.map(d,a.eventDataTransform));b.eventDataTransform&&(d=h.map(d,b.eventDataTransform));for(var e=0;d.length>e;e++)d[e].source=b,z(d[e]);n=n.concat(d)}U--;U||x(n)}})}function d(b,c){var e,
g,k=S.sourceFetchers;for(e=0;k.length>e;e++){if(g=k[e](b,m,r,c),!0===g)return;if("object"==typeof g)return d(g,c),D}if(e=b.events)h.isFunction(e)?(f(),e(w(m),w(r),function(a){c(a);l()})):h.isArray(e)?c(e):c();else if(b.url){var p=b.success,n=b.error,z=b.complete;e=h.isFunction(b.data)?b.data():b.data;e=h.extend({},e||{});g=ma(b.startParam,a.startParam);k=ma(b.endParam,a.endParam);g&&(e[g]=Math.round(+m/1E3));k&&(e[k]=Math.round(+r/1E3));f();h.ajax(h.extend({},rb,b,{data:e,success:function(a){a=a||
[];var b=wa(p,this,arguments);h.isArray(b)&&(a=b);c(a)},error:function(){wa(n,this,arguments);c()},complete:function(){wa(z,this,arguments);l()}}))}else c()}function e(a){h.isFunction(a)||h.isArray(a)?a={events:a}:"string"==typeof a&&(a={url:a});if("object"==typeof a){var b=a;b.className?"string"==typeof b.className&&(b.className=b.className.split(/\s+/)):b.className=[];for(var c=S.sourceNormalizers,d=0;c.length>d;d++)c[d](b);a=(p.push(a),a)}else a=D;return a}function f(){R++||g("loading",null,!0,
B())}function l(){--R||g("loading",null,!1,B())}function z(b){var c=b.source||{},d=ma(c.ignoreTimezone,a.ignoreTimezone);b._id=b._id||(b.id===D?"_fc"+sb++:b.id+"");b.date&&(b.start||(b.start=b.date),delete b.date);b._start=w(b.start=Fa(b.start,d));b.end=Fa(b.end,d);b.end&&b.end<=b.start&&(b.end=null);b._end=b.end?w(b.end):null;b.allDay===D&&(b.allDay=ma(c.allDayDefault,a.allDayDefault));b.className?"string"==typeof b.className&&(b.className=b.className.split(/\s+/)):b.className=[]}function k(a){return("object"==
typeof a?a.events||a.url:"")||a}this.isFetchNeeded=function(a,b){return!m||m>a||b>r};this.fetchEvents=function(a,c){m=a;r=c;n=[];var d=++C,e=p.length;U=e;for(var f=0;e>f;f++)b(p[f],d)};this.addEventSource=function(a){(a=e(a))&&(U++,b(a,C))};this.removeEventSource=function(a){p=h.grep(p,function(b){return!(b&&a&&k(b)==k(a))});n=h.grep(n,function(b){return!(b.source&&a&&k(b.source)==k(a))});x(n)};this.updateEvent=function(a){var b,c,d=n.length,e=B().defaultEventEnd,f=a.start-a._start,l=a.end?a.end-
(a._end||e(a)):0;for(b=0;d>b;b++)c=n[b],c._id==a._id&&c!=a&&(c.start=new Date(+c.start+f),c.end=a.end?c.end?new Date(+c.end+l):new Date(+e(c)+l):null,c.title=a.title,c.url=a.url,c.allDay=a.allDay,c.className=a.className,c.editable=a.editable,c.color=a.color,c.backgroundColor=a.backgroundColor,c.borderColor=a.borderColor,c.textColor=a.textColor,z(c));z(a);x(n)};this.renderEvent=function(a,b){z(a);a.source||(b&&(v.events.push(a),a.source=v),n.push(a));x(n)};this.removeEvents=function(a){if(a){if(!h.isFunction(a)){var b=
a+"";a=function(a){return a._id==b}}n=h.grep(n,a,!0);for(var c=0;p.length>c;c++)h.isArray(p[c].events)&&(p[c].events=h.grep(p[c].events,a,!0))}else{n=[];for(c=0;p.length>c;c++)h.isArray(p[c].events)&&(p[c].events=[])}x(n)};this.clientEvents=function(a){return h.isFunction(a)?h.grep(n,a):a?(a+="",h.grep(n,function(b){return b._id==a})):n};this.normalizeEvent=z;for(var m,r,g=this.trigger,B=this.getView,x=this.reportEvents,v={events:[]},p=[v],C=0,U=0,R=0,n=[],G=0;c.length>G;G++)e(c[G])}function Ca(a,
c,b){if(+a){c=a.getMonth()+c;var d=w(a);d.setDate(1);d.setMonth(c);a.setMonth(c);for(b||ca(a);a.getMonth()!=d.getMonth();)a.setDate(a.getDate()+(d>a?1:-1))}return a}function C(a,c,b){if(+a){c=a.getDate()+c;var d=w(a);d.setHours(9);d.setDate(c);a.setDate(c);b||ca(a);Ga(a,d)}return a}function Ga(a,c){if(+a)for(;a.getDate()!=c.getDate();)a.setTime(+a+(c>a?1:-1)*tb)}function Q(a,c){return a.setMinutes(a.getMinutes()+c),a}function ca(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),
a}function w(a,c){return c?ca(new Date(+a)):new Date(+a)}function Sa(){var a,c=0;do a=new Date(1970,c++,1);while(a.getHours());return a}function ra(a,c){return Math.round((w(a,!0)-w(c,!0))/ub)}function Ra(a,c,b,d){c!==D&&c!=a.getFullYear()&&(a.setDate(1),a.setMonth(0),a.setFullYear(c));b!==D&&b!=a.getMonth()&&(a.setDate(1),a.setMonth(b));d!==D&&a.setDate(d)}function Fa(a,c){return"object"==typeof a?a:"number"==typeof a?new Date(1E3*a):"string"==typeof a?a.match(/^\d+(\.\d+)?$/)?new Date(1E3*parseFloat(a)):
(c===D&&(c=!0),Ha(a,c)||(a?new Date(a):null)):null}function Ha(a,c){var b=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!b)return null;var d=new Date(b[1],0,1);if(c||!b[13]){var e=new Date(b[1],0,1,9,0);b[3]&&(d.setMonth(b[3]-1),e.setMonth(b[3]-1));b[5]&&(d.setDate(b[5]),e.setDate(b[5]));Ga(d,e);b[7]&&d.setHours(b[7]);b[8]&&d.setMinutes(b[8]);b[10]&&d.setSeconds(b[10]);b[12]&&d.setMilliseconds(1E3*
Number("0."+b[12]));Ga(d,e)}else if(d.setUTCFullYear(b[1],b[3]?b[3]-1:0,b[5]||1),d.setUTCHours(b[7]||0,b[8]||0,b[10]||0,b[12]?1E3*Number("0."+b[12]):0),b[14])e=60*Number(b[16])+(b[18]?Number(b[18]):0),e*="-"==b[15]?1:-1,d=new Date(+d+6E4*e);return d}function Ia(a){if("number"==typeof a)return 60*a;if("object"==typeof a)return 60*a.getHours()+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var c=parseInt(a[1],10);return a[3]&&(c%=12,"p"==a[3].toLowerCase().charAt(0)&&(c+=12)),60*c+(a[2]?
parseInt(a[2],10):0)}}function aa(a,c,b){return Da(a,null,c,b)}function Da(a,c,b,d){d=d||ua;var e,f,l,h,k=a,m=c,r=b.length,g="";for(e=0;r>e;e++)if(f=b.charAt(e),"'"==f)for(l=e+1;r>l;l++){if("'"==b.charAt(l)){k&&(g+=l==e+1?"'":b.substring(e+1,l),e=l);break}}else if("("==f)for(l=e+1;r>l;l++){if(")"==b.charAt(l)){e=aa(k,b.substring(e+1,l),d);parseInt(e.replace(/\D/,""),10)&&(g+=e);e=l;break}}else if("["==f)for(l=e+1;r>l;l++){if("]"==b.charAt(l)){h=b.substring(e+1,l);e=aa(k,h,d);e!=aa(m,h,d)&&(g+=e);
e=l;break}}else if("{"==f)k=c,m=a;else if("}"==f)k=a,m=c;else{for(l=r;l>e;l--)if(h=Ta[b.substring(e,l)]){k&&(g+=h(k,d));e=l-1;break}l==e&&k&&(g+=f)}return g}function sa(a){if(a.end){var c=a.end;a=a.allDay;a=(c=w(c),a||c.getHours()||c.getMinutes()?C(c,1):ca(c))}else a=C(w(a.start),1);return a}function Ua(a,c,b){a.unbind("mouseover").mouseover(function(a){for(var e,f,l,z=a.target;z!=this;)e=z,z=z.parentNode;(f=e._fci)!==D&&(e._fci=D,l=c[f],b(l.event,l.element,l),h(a.target).trigger(a));a.stopPropagation()})}
function ta(a,c,b){for(var d,e=0;a.length>e;e++)d=h(a[e]),d.width(Math.max(0,c-(Ja(d)+Ka(d)+(b?La(d):0))))}function Va(a,c,b){for(var d,e=0;a.length>e;e++)d=h(a[e]),d.height(Math.max(0,c-qa(d,b)))}function Ja(a){return(parseFloat(h.css(a[0],"paddingLeft",!0))||0)+(parseFloat(h.css(a[0],"paddingRight",!0))||0)}function La(a){return(parseFloat(h.css(a[0],"marginLeft",!0))||0)+(parseFloat(h.css(a[0],"marginRight",!0))||0)}function Ka(a){return(parseFloat(h.css(a[0],"borderLeftWidth",!0))||0)+(parseFloat(h.css(a[0],
"borderRightWidth",!0))||0)}function qa(a,c){return(parseFloat(h.css(a[0],"paddingTop",!0))||0)+(parseFloat(h.css(a[0],"paddingBottom",!0))||0)+((parseFloat(h.css(a[0],"borderTopWidth",!0))||0)+(parseFloat(h.css(a[0],"borderBottomWidth",!0))||0))+(c?(parseFloat(h.css(a[0],"marginTop",!0))||0)+(parseFloat(h.css(a[0],"marginBottom",!0))||0):0)}function ob(){}function Wa(a,c){return a-c}function na(a){return(10>a?"0":"")+a}function Ea(a,c){if(a[c]!==D)return a[c];for(var b,d=c.split(/(?=[A-Z])/),e=d.length-
1;0<=e;e--)if(b=a[d[e].toLowerCase()],b!==D)return b;return a[""]}function da(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function va(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function xa(a){a.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function Xa(a,
c){var b=a.source||{},d=a.color,e=b.color,f=c("eventColor"),l=a.backgroundColor||d||b.backgroundColor||e||c("eventBackgroundColor")||f,d=a.borderColor||d||b.borderColor||e||c("eventBorderColor")||f,b=a.textColor||b.textColor||c("eventTextColor"),e=[];return l&&e.push("background-color:"+l),d&&e.push("border-color:"+d),b&&e.push("color:"+b),e.join(";")}function wa(a,c,b){if(h.isFunction(a)&&(a=[a]),a){var d,e;for(d=0;a.length>d;d++)e=a[d].apply(c,b)||e;return e}}function ma(){for(var a=0;arguments.length>
a;a++)if(arguments[a]!==D)return arguments[a]}function Ma(a,c,b){function d(){var b=e();m&&m.remove();m=h(b).appendTo(a);r=m.find("thead");g=r.find(".fc-day-header");B=m.find("tbody");x=B.find("tr");v=B.find(".fc-day");p=x.find("td:first-child");D=x.eq(0).find(".fc-day > div");U=x.eq(0).find(".fc-day-content > div");xa(r.add(r.find("tr")));xa(x);x.eq(0).addClass("fc-first");x.filter(":last").addClass("fc-last");v.each(function(a,b){var c=ea(Math.floor(a/F),a%F);X("dayRender",k,c,h(b))});v.click(f).mousedown(ba)}
function e(){var a,b,c=H+"-widget-header",d;d="<thead><tr>";A&&(d+="<th class='fc-week-number "+c+"'>"+da(M)+"</th>");for(a=0;F>a;a++)b=ea(0,a),d+="<th class='fc-day-header fc-"+ya[b.getDay()]+" "+c+"'>"+da(ia(b,J))+"</th>";a="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+(d+"</tr></thead>");var e;d=H+"-widget-content";var s;s="<tbody>";for(b=0;q>b;b++){s+="<tr class='fc-week'>";A&&(e=ea(b,0),s+="<td class='fc-week-number "+d+"'><div>"+da(ia(e,$))+"</div></td>");for(c=0;F>
c;c++){e=ea(b,c);var f;f=e;var u=H+"-widget-content",l=k.start.getMonth(),h=ca(new Date),g="",u=["fc-day","fc-"+ya[f.getDay()],u];f=(f.getMonth()!=l&&u.push("fc-other-month"),+f==+h?u.push("fc-today",H+"-state-highlight"):h>f?u.push("fc-past"):u.push("fc-future"),g+="<td class='"+u.join(" ")+"' data-date='"+ia(f,"yyyy-MM-dd")+"'><div>",L&&(g+="<div class='fc-day-number'>"+f.getDate()+"</div>"),g+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>");s+=f}s+="</tr>"}return a+
(s+"</tbody>")+"</table>"}function f(a){if(!W("selectable")){var b=Ha(h(this).data("date"));X("dayClick",this,b,!0,a)}}function l(a,b,c){c&&O.build();a=s(a,b);for(b=0;a.length>b;b++)c=a[b],z(c.row,c.leftCol,c.row,c.rightCol).click(f).mousedown(ba)}function z(b,c,d,e){b=O.rect(b,c,d,e,a);return la(b,a)}var k=this;k.renderBasic=function(b,c,e){q=b;F=c;L=e;H=W("theme")?"ui":"fc";J=W("columnFormat");A=W("weekNumbers");M=W("weekNumberTitle");$="iso"!=W("weekNumberCalculation")?"w":"W";B||(R=h("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a));
d()};k.setHeight=function(a){G=a;var b,c,d;a=G-r.height();"variable"==W("weekMode")?b=c=Math.floor(a/(1==q?2:6)):(b=Math.floor(a/q),c=a-b*(q-1));p.each(function(a,e){q>a&&(d=h(e),d.find("> div").css("min-height",(a==q-1?c:b)-qa(d)))})};k.setWidth=function(a){n=a;V.clear();u.clear();N=0;A&&(N=r.find("th.fc-week-number").outerWidth());Q=Math.floor((n-N)/F);ta(g.slice(0,-1),Q)};k.renderDayOverlay=l;k.defaultSelectionEnd=function(a){return w(a)};k.renderSelection=function(a,b){l(a,C(w(b),1),!0)};k.clearSelection=
function(){P()};k.reportDayClick=function(a,b,c){var d=oa(a);X("dayClick",v[d.row*F+d.col],a,b,c)};k.dragStart=function(a,b){K.start(function(a){P();a&&z(a.row,a.col,a.row,a.col)},b)};k.dragStop=function(a,b,c){var d=K.stop();if(P(),d)d=ea(d),X("drop",a,d,!0,b,c)};k.defaultEventEnd=function(a){return w(a.start)};k.getHoverListener=function(){return K};k.colLeft=function(a){return V.left(a)};k.colRight=function(a){return V.right(a)};k.colContentLeft=function(a){return u.left(a)};k.colContentRight=
function(a){return u.right(a)};k.getIsCellAllDay=function(){return!0};k.allDayRow=function(a){return x.eq(a)};k.getRowCnt=function(){return q};k.getColCnt=function(){return F};k.getColWidth=function(){return Q};k.getDaySegmentContainer=function(){return R};ab.call(k,a,c,b);bb.call(k);cb.call(k);vb.call(k);var m,r,g,B,x,v,p,D,U,R,n,G,Q,N,q,F,L,O,K,V,u,H,J,A,M,$,W=k.opt,X=k.trigger,la=k.renderOverlay,P=k.clearOverlays,ba=k.daySelectionMousedown,ea=k.cellToDate,oa=k.dateToCell,s=k.rangeToSegments,ia=
c.formatDate;va(a.addClass("fc-grid"));O=new db(function(a,b){var c,d,e;g.each(function(a,s){c=h(s);d=c.offset().left;a&&(e[1]=d);e=[d];b[a]=e});e[1]=d+c.outerWidth();x.each(function(b,s){q>b&&(c=h(s),d=c.offset().top,b&&(e[1]=d),e=[d],a[b]=e)});e[1]=d+c.outerHeight()});K=new eb(O);V=new Aa(function(a){return D.eq(a)});u=new Aa(function(a){return U.eq(a)})}function vb(){var a=this;a.renderEvents=function(c,b){a.renderDayEvents(c,b)};a.clearEvents=function(){a.getDaySegmentContainer().empty()};fb.call(a)}
function gb(a,c,b){function d(){var b,c,d=ja+"-widget-header",e;e="<thead><tr>";$a?(b=pa(0,0),c=Y(b,hb),Ya?c+=Na:c=Na+c,e+="<th class='fc-agenda-axis fc-week-number "+d+"'>"+da(c)+"</th>"):e+="<th class='fc-agenda-axis "+d+"'>&nbsp;</th>";for(c=0;s>c;c++)b=pa(0,c),e+="<th class='fc-"+ya[b.getDay()]+" fc-col"+c+" "+d+"'>"+da(Y(b,Za))+"</th>";b="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+(e+("<th class='fc-agenda-gutter "+d+"'>&nbsp;</th></tr></thead>"));var f,
u,t,l;c=ja+"-widget-header";d=ja+"-widget-content";e=ca(new Date);c=""+("<tbody><tr><th class='fc-agenda-axis "+c+"'>&nbsp;</th>");t="";for(u=0;s>u;u++)f=pa(0,u),l=["fc-col"+u,"fc-"+ya[f.getDay()],d],+f==+e?l.push(ja+"-state-highlight","fc-today"):e>f?l.push("fc-past"):l.push("fc-future"),f="<td class='"+l.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>",t+=f;d=(c+=t,c+("<td class='fc-agenda-gutter "+d+"'>&nbsp;</td></tr></tbody>"));b=b+d+
"</table>";Z&&Z.remove();Z=h(b).appendTo(a);U=Z.find("thead");R=U.find("th").slice(1,-1);n=Z.find("tbody");G=n.find("td").slice(0,-1);ga=G.find("> div");N=G.find(".fc-day-content > div");q=G.eq(0);F=ga.eq(0);xa(U.add(U.find("tr")));xa(n.add(n.find("tr")))}function e(){function a(){u.scrollTop(d)}var b=Sa(),c=w(b);c.setHours(I("firstHour"));var d=g(b,c)+1;a();setTimeout(a,0)}function f(a){if(!I("selectable")){var b=Math.min(s-1,Math.floor((a.pageX-Z.offset().left-W)/X)),c=pa(0,b),d=this.parentNode.className.match(/fc-slot(\d+)/);
d?(d=parseInt(d[1])*I("slotMinutes"),c.setHours(Math.floor(d/60)),c.setMinutes(d%60+ka),Ba("dayClick",G[b],c,!1,a)):Ba("dayClick",G[b],c,!0,a)}}function l(a,b,c){c&&ha.build();a=fa(a,b);for(b=0;a.length>b;b++)c=a[b],z(c.row,c.leftCol,c.row,c.rightCol).click(f).mousedown(ib)}function z(a,b,c,d){a=ha.rect(a,b,c,d,L);return jb(a,L)}function k(a,b){for(var c=0;s>c;c++){var d=pa(0,c),e=C(w(d),1),u=new Date(Math.max(d,a)),t=new Date(Math.min(e,b));t>u&&(e=ha.rect(0,c,0,c,H),u=g(d,u),d=g(d,t),e.top=u,e.height=
d-u,jb(e,H).click(f).mousedown(v))}}function m(a){return I("allDaySlot")&&!a.row}function r(a){var b=pa(0,a.col);a=a.row;return I("allDaySlot")&&a--,0<=a&&Q(b,ka+a*ba),b}function g(a,b){if(a=w(a,!0),Q(w(a),ka)>b)return 0;if(b>=Q(w(a),za))return A.height();var c=I("slotMinutes"),d=60*b.getHours()+b.getMinutes()-ka,e=Math.floor(d/c),s=aa[e];return s===D&&(s=aa[e]=A.find("tr").eq(e).find("td div")[0].offsetTop),Math.max(0,Math.round(s-1+P*(d%c/c)))}function B(a,b){var c=I("selectHelper");if(ha.build(),
c){var d=T(a).col;if(0<=d&&s>d){var d=ha.rect(0,d,0,d,H),e=g(a,a),u=g(a,b);u>e&&((d.top=e,d.height=u-e,d.left+=2,d.width-=5,h.isFunction(c))?(c=c(a,b))&&(d.position="absolute",M=h(c).css(d).appendTo(H)):(d.isStart=!0,d.isEnd=!0,M=h(wb({title:"",start:a,end:b,className:["fc-select-helper"],editable:!1},d)),M.css("opacity",I("dragOpacity"))),M&&(M.click(f).mousedown(v),H.append(M),ta(M,d.width,!0),Va(M,d.height,!0)))}}else k(a,b)}function x(){Oa();M&&(M.remove(),M=null)}function v(a){if(1==a.which&&
I("selectable")){S(a);var b;y.start(function(a,c){if(x(),a&&a.col==c.col&&!m(a)){var d=r(c),e=r(a);b=[d,Q(w(d),ba),e,Q(w(e),ba)].sort(Wa);B(b[0],b[3])}else b=null},a);h(document).one("mouseup",function(a){y.stop();b&&(+b[0]==+b[1]&&p(b[0],!1,a),xb(b[0],b[3],!1,a))})}}function p(a,b,c){Ba("dayClick",G[T(a).col],a,b,c)}this.renderAgenda=function(b){s=b;ja=I("theme")?"ui":"fc";Ya=I("isRTL");ka=Ia(I("minTime"));za=Ia(I("maxTime"));Za=I("columnFormat");$a=I("weekNumbers");Na=I("weekNumberTitle");hb="iso"!=
I("weekNumberCalculation")?"w":"W";ba=I("snapMinutes")||I("slotMinutes");if(Z)d();else{var c,e,t,l,y=ja+"-widget-header",E=ja+"-widget-content",g=0==I("slotMinutes")%15;d();L=h("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(a);I("allDaySlot")?(O=h("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(L),b="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+y+" fc-agenda-axis'>"+I("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+
y+" fc-agenda-gutter'>&nbsp;</th></tr></table>",K=h(b).appendTo(L),V=K.find("tr"),V.find("td").click(f).mousedown(ib),L.append("<div class='fc-agenda-divider "+y+"'><div class='fc-agenda-divider-inner'/></div>")):O=h([]);u=h("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(L);H=h("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(u);J=h("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(H);b=
"<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>";c=Sa();t=Q(w(c),za);Q(c,ka);for(e=ia=0;t>c;e++)l=c.getMinutes(),b+="<tr class='fc-slot"+e+" "+(l?"fc-minor":"")+"'><th class='fc-agenda-axis "+y+"'>"+(g&&l?"&nbsp;":Y(c,I("axisFormat")))+"</th><td class='"+E+"'><div style='position:relative'>&nbsp;</div></td></tr>",Q(c,I("slotMinutes")),ia++;A=h(b+"</tbody></table>").appendTo(H);A.find("td").click(f).mousedown(v)}};this.setWidth=function(a){E.clear();t.clear();a=U.find("th:first");
K&&(a=a.add(K.find("th:first")));a=a.add(A.find("th:first"));W=0;ta(a.width("").each(function(a,b){W=Math.max(W,h(b).outerWidth())}),W);a=Z.find(".fc-agenda-gutter");K&&(a=a.add(K.find("th.fc-agenda-gutter")));var b=u[0].clientWidth;(la=u.width()-b)?(ta(a,la),a.show().prev().removeClass("fc-last")):a.hide().prev().addClass("fc-last");X=Math.floor((b-W)/s);ta(R.slice(0,-1),X)};this.setHeight=function(a){a===D&&(a=$);$=a;aa={};var b=n.position().top,c=u.position().top;a=Math.min(a-b,A.height()+c+1);
F.height(a-qa(q));L.css("top",b);u.height(a-c-1);P=A.find("tr:first").height()+1;ea=I("slotMinutes")/ba;oa=P/ea};this.afterRender=function(){e()};this.defaultEventEnd=function(a){var b=w(a.start);return a.allDay?b:Q(b,I("defaultEventMinutes"))};this.timePosition=g;this.getIsCellAllDay=m;this.allDayRow=function(){return V};this.getCoordinateGrid=function(){return ha};this.getHoverListener=function(){return y};this.colLeft=function(a){return E.left(a)};this.colRight=function(a){return E.right(a)};this.colContentLeft=
function(a){return t.left(a)};this.colContentRight=function(a){return t.right(a)};this.getDaySegmentContainer=function(){return O};this.getSlotSegmentContainer=function(){return J};this.getMinMinute=function(){return ka};this.getMaxMinute=function(){return za};this.getSlotContainer=function(){return H};this.getRowCnt=function(){return 1};this.getColCnt=function(){return s};this.getColWidth=function(){return X};this.getSnapHeight=function(){return oa};this.getSnapMinutes=function(){return ba};this.defaultSelectionEnd=
function(a,b){return b?w(a):Q(w(a),I("slotMinutes"))};this.renderDayOverlay=l;this.renderSelection=function(a,b,c){c?I("allDaySlot")&&l(a,C(w(b),1),!0):B(a,b)};this.clearSelection=x;this.reportDayClick=p;this.dragStart=function(a,b){y.start(function(a){if(Oa(),a)if(m(a))z(a.row,a.col,a.row,a.col);else{a=r(a);var b=Q(w(a),I("defaultEventMinutes"));k(a,b)}},b)};this.dragStop=function(a,b,c){var d=y.stop();Oa();d&&Ba("drop",a,r(d),m(d),b,c)};ab.call(this,a,c,b);bb.call(this);cb.call(this);yb.call(this);
var Z,U,R,n,G,ga,N,q,F,L,O,K,V,u,H,J,A,M,$,W,X,la,P,ba,ea,oa,s,ia,ha,y,E,t,ja,Ya,ka,za,Za,$a,Na,hb,I=this.opt,Ba=this.trigger,jb=this.renderOverlay,Oa=this.clearOverlays,xb=this.reportSelection,S=this.unselect,ib=this.daySelectionMousedown,wb=this.slotSegHtml,pa=this.cellToDate,T=this.dateToCell,fa=this.rangeToSegments,Y=c.formatDate,aa={};va(a.addClass("fc-agenda"));ha=new db(function(a,b){var c,d,e;R.each(function(a,s){c=h(s);d=c.offset().left;a&&(e[1]=d);e=[d];b[a]=e});e[1]=d+c.outerWidth();I("allDaySlot")&&
(c=V,d=c.offset().top,a[0]=[d,d+c.outerHeight()]);for(var s=H.offset().top,f=u.offset().top,t=f+u.outerHeight(),l=0;ia*ea>l;l++)a.push([Math.max(f,Math.min(t,s+oa*l)),Math.max(f,Math.min(t,s+oa*(l+1)))])});y=new eb(ha);E=new Aa(function(a){return ga.eq(a)});t=new Aa(function(a){return N.eq(a)})}function yb(){function a(a){return a.end?w(a.end):Q(w(a.start),l("defaultEventMinutes"))}function c(a,b){var c="<",d=a.url,e=Xa(a,l),f=["fc-event","fc-event-vert"];return k(a)&&f.push("fc-event-draggable"),
b.isStart&&f.push("fc-event-start"),b.isEnd&&f.push("fc-event-end"),f=f.concat(a.className),a.source&&(f=f.concat(a.source.className||[])),c+=d?"a href='"+da(a.url)+"'":"div",c+=" class='"+f.join(" ")+"' style='position:absolute;top:"+b.top+"px;left:"+b.left+"px;"+e+"'><div class='fc-event-inner'><div class='fc-event-time'>"+da(P(a.start,a.end,l("timeFormat")))+"</div><div class='fc-event-title'>"+da(a.title||"")+"</div></div><div class='fc-event-bg'></div>",b.isEnd&&m(a)&&(c+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),
c+("</"+(d?"a":"div")+">")}function b(a,b,c){var s=b.find("div.fc-event-time");k(a)&&d(a,b,s);c.isEnd&&m(a)&&e(a,b,s);g(a,b)}function d(a,b,c){function d(){$();if(y)if(t)c.hide(),b.draggable("option","grid",null),M(C(w(a.start),r),C(sa(a),r));else{var e=m,f,s=Q(w(a.start),e);a.end&&(f=Q(w(a.end),e));c.text(P(s,f,l("timeFormat")));c.css("display","");b.draggable("option","grid",[I,B])}}var e,g,y,E,t,h,k,p,r,m,A,v=f.getCoordinateGrid(),x=q(),I=F(),B=L(),D=O();b.draggable({scroll:!1,grid:[I,B],axis:1==
x?"y":!1,opacity:l("dragOpacity"),revertDuration:l("dragRevertDuration"),start:function(c,d){z("eventDragStart",b,a,c,d);H(a,b);v.build();e=b.position();g=v.cell(c.pageX,c.pageY);y=E=!0;t=h=n(g);m=A=r=k=p=0},drag:function(a,c){var f=v.cell(a.pageX,a.pageY);if(y=!!f){if(t=n(f),k=Math.round((c.position.left-e.left)/I),k!=p){var f=N(0,g.col),u=g.col+k,u=Math.max(0,u),u=Math.min(x-1,u),u=N(0,u);r=ra(u,f)}t||(m=Math.round((c.position.top-e.top)/B)*D)}(y!=E||t!=h||k!=p||m!=A)&&(d(),E=y,h=t,p=k,A=m);b.draggable("option",
"revert",!y)},stop:function(c,f){$();z("eventDragStop",b,a,c,f);y&&(t||r||m)?J(this,a,r,t?0:m,t,c,f):(y=!0,t=!1,k=0,r=0,m=0,d(),b.css("filter",""),b.css(e),u(a,b))}})}function e(a,b,c){var d,e,f=L(),y=O();b.resizable({handles:{s:".ui-resizable-handle"},grid:f,start:function(c,f){d=e=0;H(a,b);z("eventResizeStart",this,a,c,f)},resize:function(u,t){d=Math.round((Math.max(f,b.height())-t.originalSize.height)/f);d!=e&&(c.text(P(a.start,d||a.end?Q(r(a),y*d):null,l("timeFormat"))),e=d)},stop:function(c,
e){z("eventResizeStop",this,a,c,e);d?A(this,a,0,y*d,c,e):u(a,b)}})}var f=this;f.renderEvents=function(d,e){var f,s=d.length,u=[],g=[];for(f=0;s>f;f++)d[f].allDay?u.push(d[f]):g.push(d[f]);l("allDaySlot")&&(W(u,e),B());var y,E,t,k,u=q(),H=U(),p=Z(),r=h.map(g,a);f=[];for(s=0;u>s;s++){y=N(0,s);Q(y,H);k=g;E=r;t=y;y=Q(w(y),p-H);for(var m=void 0,n=void 0,A=void 0,J=void 0,x=void 0,M=void 0,C=void 0,L=void 0,$=[],O=k.length,m=0;O>m;m++)n=k[m],A=n.start,J=E[m],J>t&&y>A&&(t>A?(x=w(t),C=!1):(x=A,C=!0),J>y?
(M=w(y),L=!1):(M=J,L=!0),$.push({event:n,start:x,end:M,isStart:C,isEnd:L}));k=$.sort(kb);y=t=E=t=void 0;m=[];for(E=0;k.length>E;E++){t=k[E];for(y=0;m.length>y&&lb(t,m[y]).length;y++);(m[y]||(m[y]=[])).push(t)}k=m;E=k[0];t=k;J=A=n=m=y=void 0;for(y=0;t.length>y;y++){m=t[y];for(n=0;m.length>n;n++){A=m[n];A.forwardSegs=[];for(J=y+1;t.length>J;J++)lb(A,t[J],A.forwardSegs)}}if(E){for(t=0;E.length>t;t++)mb(E[t]);for(t=0;E.length>t;t++)Pa(E[t],0,0)}y=t=E=void 0;m=[];for(E=0;k.length>E;E++){t=k[E];for(y=0;t.length>
y;y++)m.push(t[y])}k=m;for(E=0;k.length>E;E++)t=k[E],t.col=s,f.push(t)}for(var F,K,P,T,X,Y,u=f.length,m="",H=v(),n=l("isRTL"),g=0;u>g;g++)s=f[g],F=s.event,p=R(s.start,s.start),r=R(s.start,s.end),k=G(s.col),E=S(s.col),t=E-k,E-=0.025*t,t=E-k,y=t*(s.forwardCoord-s.backwardCoord),l("slotEventOverlap")&&(y=Math.max(2*(y-10),y)),n?(P=E-s.backwardCoord*t,K=P-y):(K=k+s.backwardCoord*t,P=K+y),K=Math.max(K,k),P=Math.min(P,E),y=P-K,s.top=p,s.left=K,s.outerWidth=y,s.outerHeight=r-p,m+=c(F,s);H[0].innerHTML=m;
K=H.children();for(g=0;u>g;g++)s=f[g],F=s.event,T=h(K[g]),P=z("eventRender",F,F,T),!1===P?T.remove():(P&&!0!==P&&(T.remove(),T=h(P).css({position:"absolute",top:s.top,left:s.left}).appendTo(H)),s.element=T,F._id===e?b(F,T,s):T[0]._fci=g,V(F,T));Ua(H,f,b);for(g=0;u>g;g++)s=f[g],(T=s.element)&&(s.vsides=qa(T,!0),s.hsides=Ja(T)+Ka(T)+La(T),X=T.find(".fc-event-title"),X.length&&(s.contentTop=X[0].offsetTop));for(g=0;u>g;g++)s=f[g],(T=s.element)&&(T[0].style.width=Math.max(0,s.outerWidth-s.hsides)+"px",
Y=Math.max(0,s.outerHeight-s.vsides),T[0].style.height=Y+"px",F=s.event,s.contentTop!==D&&10>Y-s.contentTop&&(T.find("div.fc-event-time").text(la(F.start,l("timeFormat"))+" - "+F.title),T.find("div.fc-event-title").remove()),z("eventAfterRender",F,F,T))};f.clearEvents=function(){x().empty();v().empty()};f.slotSegHtml=c;fb.call(f);var l=f.opt,z=f.trigger,k=f.isEventDraggable,m=f.isEventResizable,r=f.eventEnd,g=f.eventElementHandlers,B=f.setHeight,x=f.getDaySegmentContainer,v=f.getSlotSegmentContainer,
p=f.getHoverListener,Z=f.getMaxMinute,U=f.getMinMinute,R=f.timePosition,n=f.getIsCellAllDay,G=f.colContentLeft,S=f.colContentRight,N=f.cellToDate,q=f.getColCnt,F=f.getColWidth,L=f.getSnapHeight,O=f.getSnapMinutes,K=f.getSlotContainer,V=f.reportEventElement,u=f.showEvents,H=f.hideEvents,J=f.eventDrop,A=f.eventResize,M=f.renderDayOverlay,$=f.clearOverlays,W=f.renderDayEvents,X=f.calendar,la=X.formatDate,P=X.formatDates;f.draggableDayEvent=function(a,b,c){function d(){t||(b.width(e).height("").draggable("option",
"grid",null),t=!0)}var e,f,g,k=c.isStart,t=!0,h=p(),m=F(),r=L(),n=O(),q=U();b.draggable({opacity:l("dragOpacity","month"),revertDuration:l("dragRevertDuration"),start:function(c,u){z("eventDragStart",b,a,c,u);H(a,b);e=b.width();h.start(function(c,e){if($(),c){f=!1;var u=N(0,e.col),h=N(0,c.col);g=ra(h,u);c.row?k?t&&(b.width(m-10),Va(b,r*Math.round((a.end?(a.end-a.start)/zb:l("defaultEventMinutes"))/n)),b.draggable("option","grid",[m,1]),t=!1):f=!0:(M(C(w(a.start),g),C(sa(a),g)),d());f=f||t&&!g}else d(),
f=!0;b.draggable("option","revert",f)},c,"drag")},stop:function(c,e){if(h.stop(),$(),z("eventDragStop",b,a,c,e),f)d(),b.css("filter",""),u(a,b);else{var l=0;t||(l=Math.round((b.offset().top-K().offset().top)/r)*n+q-(60*a.start.getHours()+a.start.getMinutes()));J(this,a,g,l,t,c,e)}}})}}function mb(a){var c,b,d=a.forwardSegs,e=0;if(a.forwardPressure===D){for(c=0;d.length>c;c++)b=d[c],mb(b),e=Math.max(e,1+b.forwardPressure);a.forwardPressure=e}}function Pa(a,c,b){var d=a.forwardSegs;if(a.forwardCoord===
D){d.length?(d.sort(Ab),Pa(d[0],c+1,b),a.forwardCoord=d[0].backwardCoord):a.forwardCoord=1;a.backwardCoord=a.forwardCoord-(a.forwardCoord-b)/(c+1);for(c=0;d.length>c;c++)Pa(d[c],0,a.forwardCoord)}}function lb(a,c,b){b=b||[];for(var d=0;c.length>d;d++)a.end>c[d].start&&a.start<c[d].end&&b.push(c[d]);return b}function Ab(a,c){return c.forwardPressure-a.forwardPressure||(a.backwardCoord||0)-(c.backwardCoord||0)||kb(a,c)}function kb(a,c){return a.start-c.start||c.end-c.start-(a.end-a.start)||(a.event.title||
"").localeCompare(c.event.title)}function ab(a,c,b){function d(a,c){var d=N[a];return h.isPlainObject(d)?Ea(d,c||b):d}function e(a,b){return c.trigger.apply(c,[a,b||p].concat(Array.prototype.slice.call(arguments,2),[p]))}function f(a){return a.end?w(a.end):Z(a)}function l(a,b,c){var d=G[a._id],e=d.length;for(a=0;e>a;a++)b&&d[a][0]==b[0]||d[a][c]()}function z(a,b,c,d){c=c||0;for(var e,f=a.length,g=0;f>g;g++)e=a[g],d!==D&&(e.allDay=d),Q(C(e.start,b,!0),c),e.end&&(e.end=Q(C(e.end,b,!0),c)),U(e,N)}function k(a,
b,c){c=c||0;for(var d,e=a.length,g=0;e>g;g++)d=a[g],d.end=Q(C(f(d),b,!0),c),U(d,N)}function m(a,b){var c=p.getColCnt(),d=V?-1:1,e=V?c-1:0;"object"==typeof a&&(b=a.col,a=a.row);return a*c+(b*d+e)}function r(a){var b=p.visStart.getDay();return a+=O[b],7*Math.floor(a/q)+K[(a%q+q)%q]-b}function g(a){var b=w(p.visStart);return C(b,a),b}function B(a){return ra(a,p.visStart)}function x(a){var b=p.visStart.getDay();return a+=b,Math.floor(a/7)*q+O[(a%7+7)%7]-O[b]}function v(a){var b=p.getColCnt();return{row:Math.floor(a/
b),col:(a%b+b)%b*(V?-1:1)+(V?b-1:0)}}var p=this;p.element=a;p.calendar=c;p.name=b;p.opt=d;p.trigger=e;p.isEventDraggable=function(a){var b=a.source||{};return ma(a.startEditable,b.startEditable,d("eventStartEditable"),a.editable,b.editable,d("editable"))&&!d("disableDragging")};p.isEventResizable=function(a){var b=a.source||{};return ma(a.durationEditable,b.durationEditable,d("eventDurationEditable"),a.editable,b.editable,d("editable"))&&!d("disableResizing")};p.setEventData=function(a){n={};var b,
c,d=a.length;for(b=0;d>b;b++)c=a[b],n[c._id]?n[c._id].push(c):n[c._id]=[c]};p.clearEventData=function(){n={};G={};S=[]};p.eventEnd=f;p.reportEventElement=function(a,b){S.push({event:a,element:b});G[a._id]?G[a._id].push(b):G[a._id]=[b]};p.triggerEventDestroy=function(){h.each(S,function(a,b){p.trigger("eventDestroy",b.event,b.event,b.element)})};p.eventElementHandlers=function(a,b){b.click(function(c){return b.hasClass("ui-draggable-dragging")||b.hasClass("ui-resizable-resizing")?D:e("eventClick",
this,a,c)}).hover(function(b){e("eventMouseover",this,a,b)},function(b){e("eventMouseout",this,a,b)})};p.showEvents=function(a,b){l(a,b,"show")};p.hideEvents=function(a,b){l(a,b,"hide")};p.eventDrop=function(a,b,c,d,f,g,l){var k=b.allDay,h=b._id;z(n[h],c,d,f);e("eventDrop",a,b,c,d,f,function(){z(n[h],-c,-d,k);R(h)},g,l);R(h)};p.eventResize=function(a,b,c,d,f,g){var l=b._id;k(n[l],c,d);e("eventResize",a,b,c,d,function(){k(n[l],-c,-d);R(l)},f,g);R(l)};var Z=p.defaultEventEnd,U=c.normalizeEvent,R=c.reportEventChange,
n={},G={},S=[],N=c.options;p.isHiddenDay=function(a){return"object"==typeof a&&(a=a.getDay()),L[a]};p.skipHiddenDays=function(a,b,c){for(b=b||1;L[(a.getDay()+(c?b:0)+7)%7];)C(a,b)};p.getCellsPerWeek=function(){return q};p.dateToCell=function(a){a=B(a);a=x(a);return v(a)};p.dateToDayOffset=B;p.dayOffsetToCellOffset=x;p.cellOffsetToCell=v;p.cellToDate=function(){var a=m.apply(null,arguments),a=r(a);return g(a)};p.cellToCellOffset=m;p.cellOffsetToDayOffset=r;p.dayOffsetToDate=g;p.rangeToSegments=function(a,
b){for(var c=p.getRowCnt(),d=p.getColCnt(),e=[],f=B(a),g=B(b),l=x(f),k=x(g)-1,h=0;c>h;h++){var m=h*d,n=m+d-1,m=Math.max(l,m),n=Math.min(k,n);if(n>=m){var q=v(m),s=v(n),q=[q.col,s.col].sort(),m=r(m)==f,n=r(n)+1==g;e.push({row:h,leftCol:q[0],rightCol:q[1],isStart:m,isEnd:n})}}return e};var q,F=d("hiddenDays")||[],L=[],O=[],K=[],V=d("isRTL");(function(){!1===d("weekends")&&F.push(0,6);for(var a=0,b=0;7>a;a++)O[a]=b,L[a]=-1!=h.inArray(a,F),L[a]||(K[b]=a,b++);if(q=b,!q)throw"invalid hiddenDays";})()}function fb(){function a(a,
b,d){a=c([a],!0,!1);var e=[];return fa(a,function(a,c){a.row===b&&c.css("top",d);e.push(c[0])}),e}function c(a,c,g){var k,m,t=H(),n=c?h("<div/>"):t;a=b(a);return d(a),k=e(a),n[0].innerHTML=k,m=n.children(),c&&t.append(m),f(a,m),fa(a,function(a,b){a.hsides=Ja(b)+Ka(b)+La(b)}),fa(a,function(a,b){b.width(Math.max(0,a.outerWidth-a.hsides))}),fa(a,function(a,b){a.outerHeight=b.outerHeight(!0)}),l(a,g),a}function b(a){for(var b=[],c=0;a.length>c;c++){for(var d=a[c],e=d.start,f=sa(d),e=X(e,f),f=0;e.length>
f;f++)e[f].event=d;b.push.apply(b,e)}return b}function d(a){for(var b=B("isRTL"),c=0;a.length>c;c++){var d=a[c],e=(b?d.isStart:d.isEnd)?u:K,f=((b?d.isEnd:d.isStart)?V:O)(d.leftCol),e=e(d.rightCol);d.left=f;d.outerWidth=e-f}}function e(a){for(var b="",c=0;a.length>c;c++){var d;d=a[c];var e="",f=B("isRTL"),g=d.event,l=g.url,k=["fc-event","fc-event-hori"];v(g)&&k.push("fc-event-draggable");d.isStart&&k.push("fc-event-start");d.isEnd&&k.push("fc-event-end");k=k.concat(g.className);g.source&&(k=k.concat(g.source.className||
[]));var h=Xa(g,B);d=(e+=l?"<a href='"+da(l)+"'":"<div",e+=" class='"+k.join(" ")+"' style='position:absolute;left:"+d.left+"px;"+h+"'><div class='fc-event-inner'>",!g.allDay&&d.isStart&&(e+="<span class='fc-event-time'>"+da(J(g.start,g.end,B("timeFormat")))+"</span>"),e+="<span class='fc-event-title'>"+da(g.title||"")+"</span></div>",d.isEnd&&p(g)&&(e+="<div class='ui-resizable-handle ui-resizable-"+(f?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),e+("</"+(l?"a":"div")+">"));b+=d}return b}function f(a,
b){for(var c=0;a.length>c;c++){var d=a[c],e=d.event,f=b.eq(c),e=x("eventRender",e,e,f);!1===e?f.remove():(e&&!0!==e&&(e=h(e).css({position:"absolute",left:d.left}),f.replaceWith(e),f=e),d.element=f)}}function l(a,b){var c=z(a),d=k(),e=[];if(b)for(var f=0;d.length>f;f++)d[f].height(c[f]);for(f=0;d.length>f;f++)e.push(d[f].position().top);fa(a,function(a,b){b.css("top",e[a.row]+a.top)})}function z(a){var b=q(),c=F(),d=[],e,f,g,l=q(),k=[];for(e=0;a.length>e;e++)f=a[e],g=f.row,f.element&&(k[g]?k[g].push(f):
k[g]=[f]);for(g=0;l>g;g++){a=k;e=g;var h=k[g]||[];f=[];h.sort(Bb);for(var m=[],n=0;h.length>n;n++){for(var p=h[n],r=0;m.length>r&&Cb(p,m[r]);r++);m[r]?m[r].push(p):m[r]=[p]}for(h=0;m.length>h;h++)f.push.apply(f,m[h]);a[e]=f}for(g=0;b>g;g++){l=k[g];a=[];for(m=0;c>m;m++)a.push(0);for(e=0;l.length>e;e++){m=f=l[e];h=a.slice(f.leftCol,f.rightCol+1);h=Math.max.apply(Math,h);m.top=h;for(m=f.leftCol;f.rightCol>=m;m++)a[m]=f.top+f.outerHeight}d.push(Math.max.apply(Math,a))}return d}function k(){var a,b=q(),
c=[];for(a=0;b>a;a++)c[a]=L(a).find("div.fc-day-content > div");return c}function m(a,b){var c=H();fa(a,function(a,c,d){var e=a.event;e._id===b?r(e,c,a):c[0]._fci=d});Ua(c,a,r)}function r(a,b,c){v(a)&&g.draggableDayEvent(a,b,c);c.isEnd&&p(a)&&g.resizableDayEvent(a,b,c);R(a,b)}var g=this;g.renderDayEvents=function(a,b){var d=c(a,!1,!0);fa(d,function(a,b){Q(a.event,b)});m(d,b);fa(d,function(a,b){x("eventAfterRender",a.event,a.event,b)})};g.draggableDayEvent=function(a,b){var c,d=W();b.draggable({delay:50,
opacity:B("dragOpacity"),revertDuration:B("dragRevertDuration"),start:function(e,f){x("eventDragStart",b,a,e,f);G(a,b);d.start(function(d,e,f,g){(b.draggable("option","revert",!d||!f&&!g),M(),d)?(e=aa(e),d=aa(d),c=ra(d,e),A(C(w(a.start),c),C(sa(a),c))):c=0},e,"drag")},stop:function(e,f){d.stop();M();x("eventDragStop",b,a,e,f);c?S(this,a,c,0,a.allDay,e,f):(b.css("filter",""),n(a,b))}})};g.resizableDayEvent=function(b,c,d){var e=B("isRTL")?"w":"e",f=c.find(".ui-resizable-"+e),g=!1;va(c);c.mousedown(function(a){a.preventDefault()}).click(function(a){g&&
(a.preventDefault(),a.stopImmediatePropagation())});f.mousedown(function(f){function l(a){x("eventResizeStop",this,b,a);h("body").css("cursor","");k.stop();M();m&&N(this,b,m,0,a);setTimeout(function(){g=!1},0)}if(1==f.which){g=!0;var k=W();q();F();var m,p,r=c.css("top"),u=h.extend({},b),z=ca(ea(b.start));Y();h("body").css("cursor",e+"-resize").one("mouseup",l);x("eventResizeStart",this,b,f);k.start(function(c,f){if(c){var g=P(f),l=P(c);(l=Math.max(l,z),m=ba(l)-ba(g))?(u.end=C(D(b),m,!0),g=p,p=a(u,
d.row,r),p=h(p),p.find("*").css("cursor",e+"-resize"),g&&g.remove(),G(b)):p&&(n(b),p.remove(),p=null);M();A(b.start,C(sa(b),m))}},f)}})};var B=g.opt,x=g.trigger,v=g.isEventDraggable,p=g.isEventResizable,D=g.eventEnd,Q=g.reportEventElement,R=g.eventElementHandlers,n=g.showEvents,G=g.hideEvents,S=g.eventDrop,N=g.eventResize,q=g.getRowCnt,F=g.getColCnt;g.getColWidth;var L=g.allDayRow,O=g.colLeft,K=g.colRight,V=g.colContentLeft,u=g.colContentRight;g.dateToCell;var H=g.getDaySegmentContainer,J=g.calendar.formatDates,
A=g.renderDayOverlay,M=g.clearOverlays,Y=g.clearSelection,W=g.getHoverListener,X=g.rangeToSegments,aa=g.cellToDate,P=g.cellToCellOffset,ba=g.cellOffsetToDayOffset,ea=g.dateToDayOffset,ca=g.dayOffsetToCellOffset}function Cb(a,c){for(var b=0;c.length>b;b++){var d=c[b];if(d.leftCol<=a.rightCol&&d.rightCol>=a.leftCol)return!0}return!1}function fa(a,c){for(var b=0;a.length>b;b++){var d=a[b],e=d.element;e&&c(d,e,b)}}function Bb(a,c){return c.rightCol-c.leftCol-(a.rightCol-a.leftCol)||c.event.allDay-a.event.allDay||
a.event.start-c.event.start||(a.event.title||"").localeCompare(c.event.title)}function cb(){function a(a){k&&(k=!1,z(),e("unselect",null,a))}function c(a,b,c,d){k=!0;e("select",null,a,b,c,d)}var b=this;b.select=function(b,d,e){a();d||(d=f(b,e));l(b,d,e);c(b,d,e)};b.unselect=a;b.reportSelection=c;b.daySelectionMousedown=function(e){var f=b.cellToDate,g=b.getIsCellAllDay,k=b.getHoverListener(),w=b.reportDayClick;if(1==e.which&&d("selectable")){a(e);var v;k.start(function(a,b){z();a&&g(a)?(v=[f(b),f(a)].sort(Wa),
l(v[0],v[1],!0)):v=null},e);h(document).one("mouseup",function(a){k.stop();v&&(+v[0]==+v[1]&&w(v[0],!0,a),c(v[0],v[1],!0,a))})}};var d=b.opt,e=b.trigger,f=b.defaultSelectionEnd,l=b.renderSelection,z=b.clearSelection,k=!1;d("selectable")&&d("unselectAuto")&&h(document).mousedown(function(b){var c=d("unselectCancel");c&&h(b.target).parents(c).length||a(b)})}function bb(){this.renderOverlay=function(b,d){var e=c.shift();return e||(e=h("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),
e[0].parentNode!=d[0]&&e.appendTo(d),a.push(e.css(b).show()),e};this.clearOverlays=function(){for(var b;b=a.shift();)c.push(b.hide().unbind())};var a=[],c=[]}function db(a){var c,b;this.build=function(){c=[];b=[];a(c,b)};this.cell=function(a,e){var f,l=c.length,h=b.length,k=-1,m=-1;for(f=0;l>f;f++)if(e>=c[f][0]&&c[f][1]>e){k=f;break}for(f=0;h>f;f++)if(a>=b[f][0]&&b[f][1]>a){m=f;break}return 0<=k&&0<=m?{row:k,col:m}:null};this.rect=function(a,e,f,l,h){h=h.offset();return{top:c[a][0]-h.top,left:b[e][0]-
h.left,width:b[l][1]-b[e][0],height:c[f][1]-c[a][0]}}}function eb(a){function c(b){b.pageX===D&&(b.pageX=b.originalEvent.pageX,b.pageY=b.originalEvent.pageY);b=a.cell(b.pageX,b.pageY);(!b!=!f||b&&(b.row!=f.row||b.col!=f.col))&&(b?(e||(e=b),d(b,e,b.row-e.row,b.col-e.col)):d(b,e),f=b)}var b,d,e,f;this.start=function(l,z,k){d=l;e=f=null;a.build();c(z);b=k||"mousemove";h(document).bind(b,c)};this.stop=function(){return h(document).unbind(b,c),f}}function Aa(a){var c=this,b={},d={},e={};c.left=function(c){return d[c]=
d[c]===D?(b[c]=b[c]||a(c)).position().left:d[c]};c.right=function(d){return e[d]=e[d]===D?c.left(d)+(b[d]=b[d]||a(d)).width():e[d]};c.clear=function(){b={};d={};e={}}}var ua={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",
day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",
next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},Db={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",
prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},S=h.fullCalendar={version:"1.6.4"},Y=S.views={};h.fn.fullCalendar=function(a){if("string"==typeof a){var c,b=Array.prototype.slice.call(arguments,1);return this.each(function(){var d=h.data(this,"fullCalendar");d&&h.isFunction(d[a])&&(d=d[a].apply(d,b),c===D&&(c=d),"destroy"==a&&h.removeData(this,"fullCalendar"))}),c!==D?c:this}a=
a||{};var d=a.eventSources||[];return delete a.eventSources,a.events&&(d.push(a.events),delete a.events),a=h.extend(!0,{},ua,a.isRTL||a.isRTL===D&&ua.isRTL?Db:{},a),this.each(function(b,c){var l=h(c),z=new nb(l,a,d);l.data("fullCalendar",z);z.render()}),this};S.sourceNormalizers=[];S.sourceFetchers=[];var rb={dataType:"json",cache:!1},sb=1;S.addDays=C;S.cloneDate=w;S.parseDate=Fa;S.parseISO8601=Ha;S.parseTime=Ia;S.formatDate=aa;S.formatDates=Da;var ya="sun mon tue wed thu fri sat".split(" "),ub=864E5,
tb=36E5,zb=6E4,Ta={s:function(a){return a.getSeconds()},ss:function(a){return na(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return na(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return na(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return na(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return na(a.getDate())},ddd:function(a,c){return c.dayNamesShort[a.getDay()]},dddd:function(a,c){return c.dayNames[a.getDay()]},
M:function(a){return a.getMonth()+1},MM:function(a){return na(a.getMonth()+1)},MMM:function(a,c){return c.monthNamesShort[a.getMonth()]},MMMM:function(a,c){return c.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return 12>a.getHours()?"a":"p"},tt:function(a){return 12>a.getHours()?"am":"pm"},T:function(a){return 12>a.getHours()?"A":"P"},TT:function(a){return 12>a.getHours()?"AM":"PM"},u:function(a){return aa(a,
"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();return 10<a&&20>a?"th":["st","nd","rd"][a%10-1]||"th"},w:function(a,c){return c.weekNumberCalculation(a)},W:function(a){var c;a=new Date(a.getTime());return a.setDate(a.getDate()+4-(a.getDay()||7)),c=a.getTime(),a.setMonth(0),a.setDate(1),Math.floor(Math.round((c-a)/864E5)/7)+1}};S.dateFormatters=Ta;S.applyAll=wa;Y.month=function(a,c){var b=this;b.render=function(a,c){c&&(Ca(a,c),a.setDate(1));var r=d("firstDay"),g=w(a,!0);g.setDate(1);var B=
Ca(w(g),1),x=w(g);C(x,-((x.getDay()-r+7)%7));f(x);var v=w(B);C(v,(7-v.getDay()+r)%7);f(v,-1,!0);var r=h(),p=Math.round(ra(v,x)/7);"fixed"==d("weekMode")&&(C(v,7*(6-p)),p=6);b.title=z(g,d("titleFormat"));b.start=g;b.end=B;b.visStart=x;b.visEnd=v;e(p,r,!0)};Ma.call(b,a,c,"month");var d=b.opt,e=b.renderBasic,f=b.skipHiddenDays,h=b.getCellsPerWeek,z=c.formatDate};Y.basicWeek=function(a,c){var b=this;b.render=function(a,c){c&&C(a,7*c);var r=C(w(a),-((a.getDay()-d("firstDay")+7)%7)),g=C(w(r),7),B=w(r);
f(B);var x=w(g);f(x,-1,!0);var v=h();b.start=r;b.end=g;b.visStart=B;b.visEnd=x;b.title=z(B,C(w(x),-1),d("titleFormat"));e(1,v,!1)};Ma.call(b,a,c,"basicWeek");var d=b.opt,e=b.renderBasic,f=b.skipHiddenDays,h=b.getCellsPerWeek,z=c.formatDates};Y.basicDay=function(a,c){var b=this;b.render=function(a,c){c&&C(a,c);f(a,0>c?-1:1);var m=w(a,!0),r=C(w(m),1);b.title=h(a,d("titleFormat"));b.start=b.visStart=m;b.end=b.visEnd=r;e(1,1,!1)};Ma.call(b,a,c,"basicDay");var d=b.opt,e=b.renderBasic,f=b.skipHiddenDays,
h=c.formatDate};Qa({weekMode:"fixed"});Y.agendaWeek=function(a,c){var b=this;b.render=function(a,c){c&&C(a,7*c);var r=C(w(a),-((a.getDay()-d("firstDay")+7)%7)),g=C(w(r),7),B=w(r);f(B);var x=w(g);f(x,-1,!0);var v=h();b.title=z(B,C(w(x),-1),d("titleFormat"));b.start=r;b.end=g;b.visStart=B;b.visEnd=x;e(v)};gb.call(b,a,c,"agendaWeek");var d=b.opt,e=b.renderAgenda,f=b.skipHiddenDays,h=b.getCellsPerWeek,z=c.formatDates};Y.agendaDay=function(a,c){var b=this;b.render=function(a,c){c&&C(a,c);f(a,0>c?-1:1);
var m=w(a,!0),r=C(w(m),1);b.title=h(a,d("titleFormat"));b.start=b.visStart=m;b.end=b.visEnd=r;e(1)};gb.call(b,a,c,"agendaDay");var d=b.opt,e=b.renderAgenda,f=b.skipHiddenDays,h=c.formatDate};Qa({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,maxTime:24,slotEventOverlap:!0})})(jQuery);
