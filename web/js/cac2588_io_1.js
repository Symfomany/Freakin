$(document).ready(function(){var b=io.connect("http://ns3296046.ovh.net:1666");b.emit("login",{});b.on("new_pvr_message",function(a){$description=a.message;$li="<li class='alert-block alert-success'><span class='description'>"+$description+"</span></li>";$("#messages_user").prepend($li)});b.on("logged",function(a){$li="<li class='alert-block alert-success'>Il s'est connect\u00e9</li>";$("#messages").prepend($li)});b.on("disconnect",function(a){});$("#messagerie").on("submit",function(a){$(this).attr("action");
$txt=$("#messagetxt").val();a.preventDefault();3<$txt.length&&(b.emit("messagerie",{message:$txt}),$elt=$('<p class="clear"><span class="text-info">Il a dit:</span> '+$("#messagetxt").val()+"</p>").hide(),$("#messages").append($elt),$elt.show("slow"),$("#messages").animate({scrollTop:$("#messages").prop("scrollHeight")},500),$("#messagetxt").val(""),$("#messagetxt").focus());return!1});$("#messagetxt").on("focus",function(){b.emit("write",{})});b.on("writing",function(a){$("#writin").html("<small><i>Il est en train de r\u00e9dig\u00e9 un message... </i></small>")});
b.on("notwriting",function(a){$("#writin").html("")});b.on("newmessage",function(a){$("#writin").html("");$elt=$('<p class="clear" id="'+a.id+'"><span class="text-info">Il a dit:</span> '+a.message+"</p>").hide();$("#messages").append($elt);$elt.show("slow");$("#messages").animate({scrollTop:$("#messages").prop("scrollHeight")},500)});$("#annonces .close").on("click",function(a){$title=$(this).parents(".alert").find("h3").text();$content=$(this).parents(".alert").find("p").text();$id=$(this).parents(".alert").attr("id");
b.emit("removeannonce",{content:$content,title:$title,id:$id})});b.on("removeannonces",function(a){$("#annonces #"+a.id).fadeOut("fast")});$("#formannonce").on("submit",function(a){$(this).attr("action");$title=$("#formannonce #title").val();$content=$("#formannonce #content").val();a.preventDefault();3<$content.length&&b.emit("annonce",{content:$content,title:$title});return!1});b.on("newannonces",function(a){$elt=$('<div id="'+a.id+'" class="alert alert-warning fade in"><button aria-hidden="true" data-dismiss="alert" class="close" type="button">\u00d7</button><h3>'+
a.title+"</h3><p>"+a.content+"</p></div>").hide();$("#annonces").append($elt);$elt.show("slow")})});
